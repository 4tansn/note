const parseMessage = (text) => {
  // Use regular expressions to find parts of the line surrounded by **
  const parts = text.split('\n').map((line, index) => {
    // Regular expression to find **bold** text within a line
    const boldRegex = /\*\*(.*?)\*\*/g;

    const elements = [];
    let lastIndex = 0;
    let match;

    // Process the line, finding and handling all bold sections (wrapped in **)
    while ((match = boldRegex.exec(line)) !== null) {
      // Add text before the **bold** section
      if (match.index > lastIndex) {
        elements.push(line.substring(lastIndex, match.index));
      }
      
      // Add the bold text
      elements.push(
        <Typography component="span" key={`${index}-bold-${match.index}`} style={{ fontWeight: 'bold' }}>
          {match[1]} {/* Only the content inside ** */}
        </Typography>
      );

      // Update lastIndex to the end of the bold section
      lastIndex = match.index + match[0].length;
    }

    // Add remaining text after the last bold section
    if (lastIndex < line.length) {
      elements.push(line.substring(lastIndex));
    }

    return (
      <Typography key={index} style={{ whiteSpace: 'pre-wrap', marginBottom: '8px' }}>
        {elements}
      </Typography>
    );
  });

  return parts;
};
