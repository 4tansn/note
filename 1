import React, { useState } from 'react';
import { Card, CardContent } from '@/components/ui/card';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';

const Chatbot = () => {
  const [messages, setMessages] = useState([
    { text: 'Hello! How can I help you today?', sender: 'bot' }
  ]);
  const [input, setInput] = useState('');

  const handleSend = async () => {
    if (input.trim()) {
      // Add user message to the chat
      setMessages([...messages, { text: input, sender: 'user' }]);

      // Send the message to the backend
      const response = await fetch('http://localhost:5000/chat', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ message: input }),
      });

      const data = await response.json();
      
      // Add bot response to the chat
      setMessages(prev => [...prev, { text: data.response, sender: 'bot' }]);
      setInput('');
    }
  };

  return (
    <div className="flex flex-col items-center justify-center h-screen bg-gray-100 p-4">
      <Card className="w-full max-w-md shadow-lg rounded-2xl">
        <CardContent>
          <div className="h-80 overflow-y-auto mb-4 p-4 bg-white rounded-lg">
            {messages.map((msg, index) => (
              <div key={index} className={`mb-2 ${msg.sender === 'user' ? 'text-right' : 'text-left'}`}>
                <span className={`inline-block p-2 rounded-lg ${msg.sender === 'user' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-black'}`}>{msg.text}</span>
              </div>
            ))}
          </div>
          <div className="flex">
            <Input 
              className="flex-1 mr-2" 
              placeholder="Type your message..." 
              value={input} 
              onChange={e => setInput(e.target.value)}
              onKeyDown={e => e.key === 'Enter' && handleSend()} 
            />
            <Button onClick={handleSend} className="bg-blue-500 text-white">Send</Button>
          </div>
        </CardContent>
      </Card>
    </div>
  );
};

export default Chatbot;




















from flask import Flask, request, jsonify
from flask_cors import CORS

app = Flask(__name__)
CORS(app)  # To allow requests from your React frontend

@app.route('/chat', methods=['POST'])
def chat():
    user_message = request.json.get('message')
    
    # Simple bot logic: respond based on user input
    if "hello" in user_message.lower():
        response = "Hi there! How can I assist you?"
    elif "bye" in user_message.lower():
        response = "Goodbye! Have a great day!"
    else:
        response = "I'm not sure how to respond to that yet."

    return jsonify({"response": response})

if __name__ == '__main__':
    app.run(debug=True)
